(this["webpackJsonpweather-react"]=this["webpackJsonpweather-react"]||[]).push([[6],{101:function(e,t,a){"use strict";var r=a(95),n=a(168);t.a=function(e){return!Object(r.a)(e)&&!Object(n.a)(e)}},103:function(e,t,a){"use strict";var r=a(2),n=a.n(r),s=a(13);a(157);t.a=function(e){var t=Object(r.useContext)(s.a).theme;return n.a.createElement("div",{className:"w-11/12 sm:w-3/4 md:w-5/6 ml-auto mr-auto h-auto bg-".concat(t," border border-red-400 text-red-700 mt-5 px-4 py-2 rounded relative"),role:"alert"},n.a.createElement("span",{className:"w-5/6 block break-words text-sm"},e.errorMessage),e.showCloseBtn&&n.a.createElement("span",{className:"absolute top-0 bottom-0 right-0 ml-3 mr-1",onClick:e.closeError},n.a.createElement("svg",{className:"fill-current h-6 w-6 text-red-500 close-icon",role:"button",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},n.a.createElement("title",null,"Close"),n.a.createElement("path",{d:"M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z"}))))}},104:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return o}));var r=a(49),n=a(2),s=a.n(n),c=s.a.createContext({weatherUnit:"C"}),o=function(e){var t=e.children,a=Object(n.useState)("C"),o=Object(r.a)(a,2),l=o[0],i=o[1];return Object(n.useEffect)((function(){localStorage.getItem("unit")?i(JSON.parse(localStorage.getItem("unit"))):localStorage.setItem("unit",JSON.stringify("C"))}),[]),s.a.createElement(c.Provider,{value:{weatherUnit:l,updateWeatherUnit:function(e){i(e),localStorage.setItem("unit",JSON.stringify(e))}}},t)}},105:function(e,t,a){"use strict";a.d(t,"a",(function(){return E})),a.d(t,"b",(function(){return S}));var r=a(133),n=a(99),s=a.n(n),c=a(100),o=a(112),l=a(106),i=a(107),d=a(111),u=a(110),h=a(2),m=a.n(h),f=a(104),p=a(11),v=a(108),y=a.n(v),b=a(125),g=function(){var e=Object(c.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.get("https://ipapi.co/json");case 3:return t=e.sent,a=t.data,e.abrupt("return",a);case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),w=a(114),x=a(101),j=a(168),E=m.a.createContext(null),O=["US","BS","PW","BZ","KY","FM","PR","VI","GU"],S=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,i=new Array(n),d=0;d<n;d++)i[d]=arguments[d];return(e=t.call.apply(t,[this].concat(i))).updateState=function(t){e.setState(Object(o.a)({},t))},e.updateFavorites=function(t){e.setState(Object(o.a)({},t))},e.state={showLoader:!0,error:null,address:{cityName:"",cityId:""},latlong:null,favorites:[],updateState:e.updateState,updateFavorites:e.updateFavorites},e.formatCoords=function(e,t){return"".concat(e,",").concat(t)},e.updateWeatherUnit=function(t){O.includes(t)&&e.context.updateWeatherUnit("F")},e.returnError=function(){e.updateState({showLoader:!1,error:"Failed to fetch address information for your geolocation. Please search for any city to get weather forecast!!"})},e.updateAddress=function(){var t=Object(c.a)(s.a.mark((function t(a){var r,n,c,o,l,i,d,u;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={},t.prev=1,t.next=4,y.a.get("".concat(w.a,"/address?latlong=").concat(a));case 4:n=t.sent.data.hits,r=n[0],Object(x.a)(r)&&(c=r.city?r.city[0]:"",o=r.administrative?r.administrative[0]:"",l=r.country?r.country:"",i="".concat(Object(b.a)(c)).concat(Object(b.a)(o)).concat(Object(b.a)(l,!1)),d=r.objectID?r.objectID:"",u=r.country_code?r.country_code.toUpperCase():"",e.updateWeatherUnit(u),e.updateState({showLoader:!1,error:null,address:{cityName:i,cityId:d},latlong:a})),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),e.returnError(),console.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}(),e.getIPAddress=Object(c.a)(s.a.mark((function t(){var a,r,n,c,o,l,i,d,u,h;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g();case 3:a=t.sent,Object(x.a)(a)?(r=a.latitude,n=a.longitude,c=a.city,o=a.region,l=a.country_name,i=a.country_code,d="".concat(c,", ").concat(o,", ").concat(l),e.updateWeatherUnit(i),u=Object(j.a)(r)||isNaN(Number(r))?"00":r,h=Object(j.a)(n)||isNaN(Number(n))?"00":n,e.updateState({showLoader:!1,error:null,address:{cityName:d},latlong:e.formatCoords(u,h)})):e.updateState({showLoader:!1,error:null}),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),e.returnError(),console.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,7]])}))),e.getAddress=Object(c.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"geolocation"in navigator?navigator.geolocation.getCurrentPosition(function(){var t=Object(c.a)(s.a.mark((function t(a){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.formatCoords(a.coords.latitude,a.coords.longitude),e.updateAddress(r);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),(function(t){console.error(t),e.getIPAddress()})):e.getIPAddress();case 1:case"end":return t.stop()}}),t)}))),e.getFavorites=function(){localStorage.getItem("favorites")&&e.setState({favorites:Object(r.a)(JSON.parse(localStorage.getItem("favorites")))})},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.getAddress(),this.getFavorites()}},{key:"render",value:function(){return m.a.createElement(E.Provider,{value:this.state},this.props.children)}}]),a}(h.Component);S.contextType=f.a,E.propTypes={address:p.PropTypes.objectOf(p.PropTypes.string),favorites:p.PropTypes.array,updateState:p.PropTypes.func,updateFavorites:p.PropTypes.func}},114:function(e,t,a){"use strict";t.a="https://weather-react-api.now.sh"},115:function(e,t,a){"use strict";var r=a(106),n=a(107),s=a(111),c=a(110),o=a(2),l=a.n(o),i=a(103),d=a(8),u=a(97),h=function(e){Object(s.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={hasError:!1,eventId:null},e}return Object(n.a)(a,[{key:"componentDidCatch",value:function(e,t){var a=this;d.c((function(r){r.setExtras(t);var n=d.a(e);a.setState({eventId:n})}))}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,this.state.hasError?l.a.createElement("div",{className:"flex"},l.a.createElement("div",{className:"w-1/6"}),l.a.createElement("div",{className:"flex-col w-2/3 justify-center text-center"},l.a.createElement(i.a,{errorMessage:"Something went wrong. Reload the page!"}),l.a.createElement("button",{className:"font-semibold py-3 px-6 rounded-full capitalize text-sun",onClick:function(){return u.b({eventId:e.state.eventId})}},"Report feedback"))):this.props.children)}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),a}(o.Component);t.a=h},125:function(e,t,a){"use strict";var r=a(101);t.a=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Object(r.a)(e)?"".concat(e).concat(t?", ":""):""}},156:function(e,t,a){},157:function(e,t,a){},172:function(e,t,a){"use strict";a.r(t),a.d(t,"HomeContainer",(function(){return U}));var r=a(106),n=a(107),s=a(111),c=a(110),o=a(2),l=a.n(o),i=a(99),d=a.n(i),u=a(100),h=a(108),m=a.n(h),f=a(124),p=(a(156),a(13)),v=function(e){var t=e.address,a=e.selectedAddressIndex,r=e.index,n=e.addressSelected,s=Object(o.useContext)(p.a),c=s.theme,i=s.colorTheme;return l.a.createElement("p",{className:"px-5 py-1 cursor-pointer item hover:text-".concat(c," hover:bg-").concat(i," ").concat(r===a?"text-".concat(c," bg-").concat(i):"text-".concat(i)),onClick:n},t.cityName)},y=a(50),b=a(103),g=a(105),w=a(126),x=a(158),j=function(e){var t=e.type,a=e.color,r={search:l.a.createElement(w.b,null),up:l.a.createElement(x.b,null),down:l.a.createElement(x.a,null)};return l.a.createElement("p",{className:"opacity-75 text-2xl fill-".concat(a)},r[t])},E=function(e){var t=Object(o.useContext)(p.a),a=t.theme,r=t.colorTheme;return l.a.createElement("div",{className:"h-12 mx-5 mt-5"},l.a.createElement("div",{className:"relative"},l.a.createElement("div",{className:"absolute top-0 left-0 ml-5 mt-3"},l.a.createElement(j,{type:"search",color:r})),l.a.createElement("input",{style:{backgroundColor:"".concat("dark"===a?"#3a3a3a":"#e2e8f0"),letterSpacing:"0.05em"},className:"data-hj-whitelist block appearance-none w-full border-none rounded-full shadow py-3 pl-12 pr-6 mb-3 leading-tight focus:outline-none focus:bg-gray-200 truncate text-".concat(r),id:"grid-first-name",type:"text",placeholder:"Type city name to find weather forecast",onChange:e.citySearch,onKeyDown:e.keyPressed,tabIndex:"0",value:e.city}),e.showCaret?l.a.createElement("div",{className:"flex right-0 absolute top-0 mr-4 mt-3 cursor-pointer",onClick:e.caretClicked},e.showAddresses?l.a.createElement(j,{type:"up",color:r}):l.a.createElement(j,{type:"down",color:r})):null))},O=a(27),S=a(125),C=a(114),k=a(101),N=a(175),A=a(168);Object(f.a)(m.a,{retryDelay:f.a.exponentialDelay,retries:1});var I=function(e){Object(s.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).listRef=l.a.createRef(void 0),e.state={showCaret:!1,showAddresses:!1,showLoader:!1,city:"",addresses:[],selectedAddressIndex:0,scrollOffset:0,errorMessage:""},e.debounceAddress=Object(N.a)(e.getAddresses,1e3),e.searchCity=function(t){e.setState({city:t.target.value,errorMessage:""}),e.debounceAddress()},e.toggleAddresses=function(){e.setState((function(e){return{showAddresses:!e.showAddresses}}))},e.setCity=function(){var t=Object(u.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a&&(e.setState({city:a.cityName.split(",")[0],showAddresses:!1}),Object(O.a)({category:"Address",action:"City Search",label:a.cityName}),e.context.updateState({address:a,latlong:a.latlong}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.keyCodeHandler=function(t){t.keyCode&&(38===t.keyCode?(e.setState((function(e){return{selectedAddressIndex:Math.max(0,e.selectedAddressIndex-1)}})),e.listRef.current.scrollTo({left:0,top:e.state.selectedAddressIndex<6?0:30*e.state.selectedAddressIndex,behavior:"auto"})):40===t.keyCode&&(e.setState((function(t){return{selectedAddressIndex:Math.min(t.selectedAddressIndex+1,e.state.addresses.length-1)}})),e.listRef.current.scrollTo({left:0,top:30*e.state.selectedAddressIndex,behavior:"auto"})))},e}return Object(n.a)(a,[{key:"handleError",value:function(e){this.setState({errorMessage:e})}},{key:"getAddresses",value:function(){var e=Object(u.a)(d.a.mark((function e(){var t,a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.city.trim()){e.next=18;break}return e.prev=1,this.setState({showLoader:!0}),t=Object(A.a)(this.context.latlong)||isNaN(Number(this.context.latlong))?"00,00":this.context.latlong,e.next=6,m.a.get("".concat(C.a,"/places?city=").concat(this.state.city,"&latlong=").concat(t));case 6:a=e.sent.data.hits,Object(k.a)(a)?(r=a.map((function(e){var t="".concat(e.locale_names.en?e.locale_names.en[0]:e.locale_names.default[0]),a="".concat(e.administrative?e.administrative[0]:""),r="".concat(e.country.en?e.country.en:e.country.default),n="".concat(Object(S.a)(t)).concat(Object(S.a)(a)).concat(Object(S.a)(r,!1)),s=e._geoloc,c=s.lat,o=s.lng;return{cityName:n,cityId:e.objectID,latlong:"".concat(c,",").concat(o)}})),this.setState({addresses:r,showCaret:!0,showAddresses:!0,errorMessage:""})):(this.setState({showAddresses:!1}),this.handleError("No matching cities found. Try searching with a valid city name!")),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),this.handleError("Something went wrong. Please try again or search with a different city name!");case 13:return e.prev=13,this.setState({showLoader:!1,selectedAddressIndex:0}),e.finish(13);case 16:e.next=19;break;case 18:this.clearState();case 19:case"end":return e.stop()}}),e,this,[[1,10,13,16]])})));return function(){return e.apply(this,arguments)}}()},{key:"clearState",value:function(){this.setState({showCaret:!1,showAddresses:!1,showLoader:!1,addresses:[],selectedAddressIndex:0,errorMessage:""})}},{key:"render",value:function(){var e=this;return l.a.createElement(o.Fragment,null,l.a.createElement("div",{className:"flex justify-center mt-5"},l.a.createElement("div",{className:"w-full sm:w-5/6 md:w-2/3 xl:max-w-5xl"},l.a.createElement(E,{city:this.state.city,showCaret:this.state.showCaret,showAddresses:this.state.showAddresses,citySearch:this.searchCity,keyPressed:this.keyCodeHandler,caretClicked:this.toggleAddresses}))),l.a.createElement("div",{className:"flex justify-center"},l.a.createElement("div",{className:"w-full sm:w-5/6 md:w-2/3 xl:max-w-5xl"},this.state.showLoader?l.a.createElement(y.a,null):this.state.showAddresses&&l.a.createElement("div",{className:"mx-10 mt-0 border-solid border-2 border-gray-400 rounded-b-xl address-list",ref:this.listRef},this.state.addresses.map((function(t,a){return l.a.createElement(v,{address:t,selectedAddressIndex:e.state.selectedAddressIndex,index:a,key:a,addressSelected:function(){return e.setCity(t)}})}))),this.state.errorMessage.length>0&&l.a.createElement("div",{className:"flex justify-center"},l.a.createElement("div",{className:"w-5/6"},l.a.createElement(b.a,{errorMessage:this.state.errorMessage,showCloseBtn:!0,closeError:function(){e.setState({errorMessage:""})}}))))))}}]),a}(o.Component);I.contextType=g.a;var P=I,M=a(104),T=a(115),L=Object(o.lazy)((function(){return Promise.all([a.e(0),a.e(1),a.e(9)]).then(a.bind(null,169))})),F=Object(o.lazy)((function(){return Promise.all([a.e(0),a.e(7),a.e(1),a.e(8)]).then(a.bind(null,174))})),U=function(e){Object(s.a)(a,e);var t=Object(c.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(n.a)(a,[{key:"render",value:function(){return l.a.createElement(o.Fragment,null,l.a.createElement(M.b,null,l.a.createElement(g.b,null,l.a.createElement(P,null),l.a.createElement(T.a,null,l.a.createElement(o.Suspense,{fallback:l.a.createElement(y.a,{loaderText:"Loading weather forecast UI"})},l.a.createElement(L,null),l.a.createElement(F,null))))))}}]),a}(o.Component);U.contextType=p.a;t.default=U}}]);
//# sourceMappingURL=6.43c46b5d.chunk.js.map